<!DOCTYPE html>
<html>
<head>
  <title>Testit - Shop</title>
  <style>
    body { margin: 0; font-family: Arial; background: #0b1020; color: white; }
    .topbar { background: #1f2937; padding: 15px; display: flex; justify-content: center; gap: 20px; }
    .topbar a { color: white; text-decoration: none; font-weight: bold; }
    .topbar a:hover { text-decoration: underline; }
    .container { padding: 30px; text-align: center; }
    .pack { background-color: #2563eb; width: 220px; margin: 30px auto; padding: 20px; border-radius: 16px; cursor: pointer; box-shadow: 0 8px 20px rgba(0,0,0,0.4); transition: transform 0.2s; }
    .pack:hover { transform: scale(1.05); background-color: #1d4ed8; }
    .pack h2 { margin: 0; }
    .pack p { margin-top: 10px; font-size: 16px; }
    #coinsDisplay { font-size: 22px; margin-top: 20px; }
  </style>
</head>
<body>

<div class="topbar">
  <a href="index.html">Home</a>
  <a href="stats.html">Stats</a>
  <a href="tests.html">Tests</a>
  <a href="shop.html">Shop</a>
  <a href="announcements.html">Announcements</a>
  <a href="admin.html">Admin</a>
</div>

<div class="container">
  <h1>üéÅ Shop</h1>
  <div id="coinsDisplay">Coins: 0</div>

  <div class="pack" onclick="buyPack(30)">
    <h2>Starter Pack</h2>
    <p>Cost: 30 Coins</p>
  </div>

  <div class="pack" onclick="buyPack(50)">
    <h2>Rare Pack</h2>
    <p>Cost: 50 Coins</p>
  </div>

  <div id="lastPackResult"></div>
</div>

<script>
  // Load coins and characters from localStorage
  let coins = parseInt(localStorage.getItem("coins")) || 100;
  let characters = JSON.parse(localStorage.getItem("characters")) || [];

  document.getElementById("coinsDisplay").innerText = "Coins: " + coins;

  const possibleCharacters = [
    {name:"Blocky", rarity:"common", img:"https://via.placeholder.com/100/888888?text=Blocky"},
    {name:"Zapster", rarity:"common", img:"https://via.placeholder.com/100/888888?text=Zapster"},
    {name:"Frosto", rarity:"rare", img:"https://via.placeholder.com/100/0000FF?text=Frosto"},
    {name:"Shadowbit", rarity:"legendary", img:"https://via.placeholder.com/100/FFD700?text=Shadowbit"}
  ];

  function buyPack(cost) {
    if(coins < cost) { alert("Not enough coins!"); return; }

    coins -= cost;
    localStorage.setItem("coins", coins);
    document.getElementById("coinsDisplay").innerText = "Coins: " + coins;

    // Random character drop
    let roll = Math.random();
    let chosen;
    if(roll < 0.5) chosen = possibleCharacters[0];
    else if(roll < 0.85) chosen = possibleCharacters[2];
    else chosen = possibleCharacters[3];

    characters.push(chosen);
    localStorage.setItem("characters", JSON.stringify(characters));

    // Show pack result with image
    document.getElementById("lastPackResult").innerHTML =
      `<h3>You got ${chosen.name} (${chosen.rarity})!</h3>` +
      `<img src="${chosen.img}" alt="${chosen.name}" width="100" />`;
  }
</script>

</body>
</html>
